---
description: 喂奶记录功能 - 追踪亲喂和瓶喂（单条记录模式）
globs:
  - "src/components/forms/BreastfeedForm.tsx"
  - "src/components/forms/BottleForm.tsx"
alwaysApply: false
---

# 喂奶记录

追踪宝宝的喂奶情况，支持亲喂（母乳直接喂）和瓶喂（奶瓶喂）两种模式。

## Core Components

**数据模型:**
- `Activity` - type: `BREASTFEED` | `BOTTLE`（单条记录，非配对）
- `recordTime` - 开始喂奶时间
- `duration` - 喂奶时长（分钟）
- `milkAmount` - 奶量（毫升，仅瓶喂）
- `burpSuccess` - 拍嗝是否成功

**组件:**
- `BreastfeedForm` - 亲喂表单（含时间滑块、时长滑块、拍嗝状态、记住选择）
- `BottleForm` - 瓶喂表单（含时间滑块、奶量滑块、时长滑块、拍嗝状态、记住选择）
- `SliderInput` - 通用滑块输入组件

## How It Works

### 亲喂流程（单条记录）
1. 点击"亲喂"按钮
2. 打开 `BreastfeedForm`
3. 调整开始时间（滑块 + 微调按钮）
4. 调整喂奶时长（滑块：5-45分钟，1分钟间隔）
5. 选择拍嗝状态（成功/未成功）
6. 可选：点击"记住当前选择"
7. 确认记录

### 瓶喂流程（单条记录）
1. 点击"瓶喂"按钮
2. 打开 `BottleForm`
3. 调整开始时间
4. 调整奶量（滑块：10-200ml，10ml间隔）
5. 调整喂奶时长（滑块：5-45分钟，1分钟间隔）
6. 选择拍嗝状态
7. 可选：点击"记住当前选择"
8. 确认记录

### 时间选择器（TimeAdjuster）
- **滑块**: 范围从"1小时前"到"现在"，5分钟间隔
- **微调按钮**: -1小时、-15分钟、-5分钟、+1分钟
- **不显示日期**: 只显示时间（HH:mm格式）
- +1分钟按钮在当前时间时禁用（不允许超过当前时间）
- 点击时间显示可重置为现在

### 滑块输入（SliderInput）
- 显示当前值 + 单位
- 滑块拖动调整
- 微调按钮：±小步进、±大步进（大步进 = 小步进 × 5）

### 记住选择功能
- 点击"记住当前选择"文字按钮切换状态
- 图标状态: ✓ 绿色 = 已记住，□ 灰色 = 未记住
- 保存在 localStorage: `breastfeed_form_preferences` / `bottle_form_preferences`
- 记住内容: 默认时长、默认奶量（瓶喂）、默认拍嗝状态
- 下次打开表单自动填充

## Key Files
- `src/components/forms/BreastfeedForm.tsx` - 亲喂表单
- `src/components/forms/BottleForm.tsx` - 瓶喂表单
- `src/components/TimeAdjuster.tsx` - 时间滑块+微调组件
- `src/components/SliderInput.tsx` - 通用滑块输入组件
- `src/app/page.tsx` - 主页面
- `src/types/activity.ts` - 类型定义

## UI 设计要点
- 字体加大：适配老年看护者使用
- 时间显示：`text-5xl` 大号字体
- 不显示日期：表单中只显示时间
- 滑块输入：触控友好，数值显示清晰
- 颜色区分：亲喂粉色系、瓶喂蓝色系

## Future Improvements
- 喂奶侧记录（左侧/右侧/两侧）
- 每日奶量统计
- 喂奶间隔提醒
- 奶量趋势图表
