// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DATABASE_URL_UNPOOLED")
}

// 活动类型枚举
enum ActivityType {
  SLEEP            // 睡眠（startTime=入睡时间，endTime=睡醒时间，endTime为null表示正在睡）
  DIAPER           // 换尿布（只有startTime）
  BREASTFEED       // 亲喂（startTime=开始时间，endTime=结束时间）
  BOTTLE           // 瓶喂（startTime=开始时间，endTime=结束时间，milkAmount=奶量）
  HEAD_LIFT        // 抬头
  PASSIVE_EXERCISE // 被动操
  GAS_EXERCISE     // 排气操
  BATH             // 洗澡
  OUTDOOR          // 户外晒太阳
  EARLY_EDUCATION  // 早教
}

// 大便颜色枚举
enum PoopColor {
  YELLOW       // 黄色
  GREEN        // 绿色
  BROWN        // 棕色
  BLACK        // 黑色
  WHITE        // 白色
  RED          // 红色（需要注意）
}

// 小便量枚举
enum PeeAmount {
  SMALL   // 少
  MEDIUM  // 中
  LARGE   // 多
}

// 乳房硬度枚举（亲喂后）
enum BreastFirmness {
  SOFT    // 软
  ELASTIC // 弹
  HARD    // 硬
}

// 宝宝资料模型（单例，只存储一个宝宝的信息）
model BabyProfile {
  id        String   @id @default("default")
  name      String?  // 宝宝名字
  avatarUrl String?  // 头像URL（存储在Vercel Blob）
  birthDate DateTime? // 出生日期
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// 活动记录模型
model Activity {
  id              String       @id @default(cuid())
  type            ActivityType
  startTime       DateTime     @default(now()) // 活动开始时间
  endTime         DateTime?    // 活动结束时间（可选，正在进行的活动没有结束时间）
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt

  // 尿布相关字段
  hasPoop         Boolean?     // 是否有大便
  hasPee          Boolean?     // 是否有小便
  poopColor       PoopColor?   // 大便颜色
  poopPhotoUrl    String?      // 大便照片URL（存储在Vercel Blob）
  peeAmount       PeeAmount?   // 小便量

  // 喂奶相关字段
  burpSuccess     Boolean?     // 拍嗝是否成功
  milkAmount      Int?         // 奶量（毫升）- 瓶喂专用
  breastFirmness  BreastFirmness? // 乳房硬度（亲喂后）- 软、弹、硬

  // 备注
  notes           String?

  @@index([type])
  @@index([startTime])
  @@index([createdAt])
}
